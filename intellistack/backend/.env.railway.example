# ============================================
# RAILWAY DEPLOYMENT INSTRUCTIONS
# ============================================
# 1. Create three Railway services: backend, auth-server, content
# 2. Add PostgreSQL (Neon), Redis, and Qdrant plugins
# 3. Copy these variables to each service's environment variables
# 4. Replace <placeholders> with actual Railway service URLs
# 5. Railway automatically sets PORT - do not override it

# ============================================
# Application Settings
# ============================================
ENVIRONMENT=production
DEBUG=false
SECRET_KEY=<generate-with-openssl-rand-base64-32>
ALGORITHM=EdDSA
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# Database (Neon PostgreSQL) - REQUIRED
# ============================================
DATABASE_URL=<neon-database-url-from-railway-plugin>

# ============================================
# Redis Cache - REQUIRED
# ============================================
REDIS_URL=<railway-redis-url-from-plugin>

# ============================================
# Qdrant Vector Database - REQUIRED
# ============================================
QDRANT_HOST=<railway-qdrant-hostname-from-plugin>
QDRANT_PORT=6333
QDRANT_API_KEY=<qdrant-api-key-if-required>
QDRANT_COLLECTION_NAME=intellistack_content
QDRANT_USE_HTTPS=false  # Set to true if using external Qdrant Cloud

# ============================================
# AI Services - REQUIRED
# ============================================
OPENAI_API_KEY=<real-openai-api-key>
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
COHERE_API_KEY=<cohere-api-key-for-reranking>

# ============================================
# Better-Auth Configuration - REQUIRED
# ============================================
BETTER_AUTH_SECRET=<generate-with-openssl-rand-base64-32>
BETTER_AUTH_URL=https://<auth-server-railway-domain>.railway.app
BETTER_AUTH_JWKS_URL=https://<auth-server-railway-domain>.railway.app/.well-known/jwks.json
BETTER_AUTH_ISSUER=https://<auth-server-railway-domain>.railway.app
BETTER_AUTH_AUDIENCE=intellistack-api
BETTER_AUTH_TRUST_HOST=true

# ============================================
# Google OAuth - REQUIRED
# ============================================
GOOGLE_CLIENT_ID=<google-oauth-client-id>
GOOGLE_CLIENT_SECRET=<google-oauth-client-secret>
GOOGLE_REDIRECT_URI=https://<backend-railway-domain>.railway.app/api/v1/auth/callback/google

# ============================================
# GitHub OAuth (Optional)
# ============================================
GITHUB_CLIENT_ID=<github-oauth-client-id>
GITHUB_CLIENT_SECRET=<github-oauth-client-secret>
GITHUB_REDIRECT_URI=https://<backend-railway-domain>.railway.app/api/v1/auth/callback/github

# ============================================
# CORS Settings - REQUIRED
# ============================================
CORS_ORIGINS=https://<content-railway-domain>.railway.app,https://<backend-railway-domain>.railway.app,https://<auth-server-railway-domain>.railway.app

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_AUTH=60
RATE_LIMIT_UNAUTH=10

# ============================================
# ChatKit AI Tutor
# ============================================
CHATKIT_RATE_LIMIT_STUDENT=20
CHATKIT_RATE_LIMIT_INSTRUCTOR=0
CHATKIT_RATE_LIMIT_ADMIN=0

# ============================================
# Logging
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================
# Server Configuration (Railway sets PORT automatically)
# ============================================
HOST=0.0.0.0
# PORT is set by Railway - do not override
